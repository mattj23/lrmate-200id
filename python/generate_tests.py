import json
from pathlib import Path
import numpy

raw_data = """
{ -0.355708, -0.173709, 0.918312, 0.000000, 0.717742, -0.680099, 0.149368, 0.000000, 0.598597, 0.712243, 0.366595, 0.000000, 250.689172, 190.092170, 377.021336, 1.000000 }, new double[] { 250.689172, 190.092170, 377.021336, 22.168324, -66.680543, -153.971487 }) };
{ 0.875453, 0.474534, 0.091654, 0.000000, 0.335633, -0.733383, 0.591185, 0.000000, 0.347755, -0.486792, -0.801312, 0.000000, 324.515443, -269.225543, 109.845856, 1.000000 }, new double[] { 324.515443, -269.225543, 109.845856, 143.581155, -5.258767, 28.459638 }) };
{ 0.829857, -0.392800, 0.396290, 0.000000, -0.290899, -0.910637, -0.293458, 0.000000, 0.476147, 0.128247, -0.869964, 0.000000, 480.998803, -24.848409, 44.451180, 1.000000 }, new double[] { 480.998803, -24.848409, 44.451180, -161.359637, -23.346471, -25.329844 }) };
{ 0.622543, 0.286126, 0.728404, 0.000000, 0.659905, -0.692256, -0.292073, 0.000000, 0.420672, 0.662506, -0.619775, 0.000000, 427.425001, 317.808911, 185.181686, 1.000000 }, new double[] { 427.425001, 317.808911, 185.181686, -154.767540, -46.752739, 24.683898 }) };
{ 0.121273, 0.027579, 0.992236, 0.000000, 0.016312, -0.999534, 0.025788, 0.000000, 0.992485, 0.013058, -0.121667, 0.000000, 640.024599, 54.109546, 303.808089, 1.000000 }, new double[] { 640.024599, 54.109546, 303.808089, 168.032738, -82.855635, 12.811951 }) };
{ -0.155532, 0.025165, 0.987510, 0.000000, -0.422104, -0.905508, -0.043406, 0.000000, 0.893106, -0.423583, 0.151457, 0.000000, 416.744163, -205.770414, 328.606008, 1.000000 }, new double[] { 416.744163, -205.770414, 328.606008, -15.991663, -80.935040, 170.809286 }) };
{ -0.027822, -0.281693, 0.959101, 0.000000, -0.180557, -0.942275, -0.281989, 0.000000, 0.983171, -0.181018, -0.024646, 0.000000, 431.202555, -21.951723, 228.946720, 1.000000 }, new double[] { 431.202555, -21.951723, 228.946720, -94.994930, -73.556872, -95.640661 }) };
{ -0.779100, 0.547427, 0.305495, 0.000000, -0.238741, -0.709679, 0.662841, 0.000000, 0.579661, 0.443485, 0.683604, 0.000000, 243.109205, 126.817247, 442.214652, 1.000000 }, new double[] { 243.109205, 126.817247, 442.214652, 44.116508, -17.787954, 144.906558 }) };
{ -0.338094, 0.151820, 0.928786, 0.000000, -0.333176, -0.942296, 0.032746, 0.000000, 0.880162, -0.298378, 0.369167, 0.000000, 342.415569, -7.408160, 346.902494, 1.000000 }, new double[] { 342.415569, -7.408160, 346.902494, 5.069014, -68.246332, 155.817742 }) };

"""


def main():
    print("@pytest.mark.parametrize('matrix,xyzwpr', [")
    for line in raw_data.split("\n"):
        if not line.strip():
            continue

        start, end = line.split("},")
        start = _as_list(start.split("{")[1].strip())
        end = _as_list(end.split("{")[1].strip().split("}")[0].strip())

        t = numpy.matrix(start).reshape(4, 4).transpose().tolist()
        print(f" ({t}, {end}),")
    print("])")

    # source_file = Path.cwd().parent / "test_cases" / "r30ib_forward_kinematics.json"
    # with source_file.open("r") as handle:
    #     data = json.load(handle)
    #
    # print(data)


def _as_list(text: str) -> list[float]:
    return [float(x.strip()) for x in text.split(",")]


if __name__ == '__main__':
    main()
